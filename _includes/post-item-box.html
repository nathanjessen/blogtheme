{%- if post.external_url -%}
{%- assign url = post.external_url -%}
{%- assign is_external = true -%}
{%- else -%}
{%- assign url = post.url -%}
{%- endif -%}
<div class="group relative bg-white rounded-2xl shadow-sm ring-1 ring-black/5 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
  <a href="{{ url | relative_url }}" class="block">
    {% if post.img %}
    <div class="aspect-w-16 aspect-h-9 rounded-t-2xl overflow-hidden">
      <img src="{{ post.img }}" alt="{{ post.img_alt }}" 
        class="object-cover w-full h-full transform group-hover:scale-105 transition-transform duration-500">
    </div>
    {% endif %}
    
    <div class="p-6">
      <div class="flex items-center space-x-2 text-sm text-gray-500">
        <time datetime="{{ post.date | date_to_xmlschema }}" class="font-medium text-primary-600">
          {{ post.date | date: "%b %-d, %Y" }}
        </time>
        {% if post.category %}
        <span class="text-gray-300">&bull;</span>
        <span class="font-medium text-primary-600">{{ post.category }}</span>
        {% endif %}
      </div>
      
      <h3 class="mt-3 text-xl font-semibold text-gray-900 text-balance group-hover:text-primary-600 transition-colors duration-300">
        {{ post.title }}
      </h3>
      
      <p class="mt-2 text-base text-gray-500 text-pretty line-clamp-3">
        {{ post.excerpt | strip_html | strip_newlines | truncate: 160 }}
      </p>
      
      {% if post.tags %}
      <div class="mt-4 flex flex-wrap gap-2">
        {% assign tags = post.tags %}
        {% for tag in tags %}
        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800">
          {{ tag }}
        </span>
        {% endfor %}
      </div>
      {% endif %}
      
      <div class="mt-6 flex items-center">
        {% if post.author_img %}
        <div class="flex-shrink-0">
          <img class="h-10 w-10 rounded-full object-cover" src="{{ post.author_img }}" alt="{{ post.author }}">
        </div>
        {% endif %}
        <div class="ml-3">
          <p class="text-sm font-medium text-gray-900">
            {{ post.author }}
          </p>
          {% if post.author_title %}
          <div class="text-xs text-gray-500">
            {{ post.author_title }}
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </a>
  
  <div class="absolute inset-0 rounded-2xl ring-2 ring-transparent transition-all duration-300 group-hover:ring-primary-200/50"></div>
</div>
